#!/bin/bash
#SBATCH --job-name=all_paired
#SBATCH --output=/oak/stanford/groups/russpold/data/uh2/aim1/analysis_code/survey_medley_code/log/all_paired_question_randomise_%A_%a.out
#SBATCH --error=/oak/stanford/groups/russpold/data/uh2/aim1/analysis_code/survey_medley_code/log/all_paired_question_randomise_%A_%a.err
#SBATCH --time=10:00:00
#SBATCH -p russpold,hns,normal
#SBATCH --ntasks=1
#SBATCH --cpus-per-task=4
#SBATCH --mem=32G
#SBATCH --array=0-2%3

PROJECT_ROOT="/oak/stanford/groups/russpold/data/uh2/aim1/analysis_code/survey_medley_code"
UV_SETUP="$PROJECT_ROOT/setup_uv_sherlock.sh"
source $UV_SETUP

PAIRED_DIR_ROOT="/oak/stanford/groups/russpold/data/uh2/aim1/derivatives/survey_medley_results/within_subject_question_estimates/all_paired_t_tests"

# ---- Put all randomise_call.sh paths into an array ----
CALLS=(
  # "$PAIRED_DIR_ROOT/paired_test_brief_minus_future_time/randomise_call.sh"
  # "$PAIRED_DIR_ROOT/paired_test_future_time_minus_impulsive_venture/randomise_call.sh"
  # "$PAIRED_DIR_ROOT/paired_test_brief_minus_grit/randomise_call.sh"
  "$PAIRED_DIR_ROOT/paired_test_future_time_minus_upps/randomise_call.sh"
  "$PAIRED_DIR_ROOT/paired_test_brief_minus_impulsive_venture/randomise_call.sh"
  "$PAIRED_DIR_ROOT/paired_test_grit_minus_impulsive_venture/randomise_call.sh"
  # "$PAIRED_DIR_ROOT/paired_test_brief_minus_upps/randomise_call.sh"
  # "$PAIRED_DIR_ROOT/paired_test_grit_minus_upps/randomise_call.sh"
  # "$PAIRED_DIR_ROOT/paired_test_future_time_minus_grit/randomise_call.sh"
  # "$PAIRED_DIR_ROOT/paired_test_impulsive_venture_minus_upps/randomise_call.sh"
)

# ---- Select the script based on the array index ----
TARGET="${CALLS[$SLURM_ARRAY_TASK_ID]}"

echo "Running: $TARGET"
chmod +x "$TARGET"    # safety
"$TARGET"
